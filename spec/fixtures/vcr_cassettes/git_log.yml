---
http_interactions:
- request:
    method: get
    uri: https://api.github.com/repos/everydayhero/supporter/compare/5f9d5684d5dda99c3983caaa08982e961c3a424a...2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d
    body:
      encoding: US-ASCII
      string: ''
    headers:
      accept:
      - application/vnd.github.beta+json
      user-agent:
      - Octokit Ruby Gem 2.0.0
      authorization:
      - token 5b4a8f9d29220d7ef55eda4b04fddd22c91df272
      accept-encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      server:
      - GitHub.com
      date:
      - Thu, 19 Dec 2013 07:21:28 GMT
      content-type:
      - application/json; charset=utf-8
      transfer-encoding:
      - chunked
      connection:
      - close
      status:
      - 200 OK
      x-ratelimit-limit:
      - '5000'
      x-ratelimit-remaining:
      - '4907'
      x-ratelimit-reset:
      - '1387439608'
      cache-control:
      - private, max-age=60, s-maxage=60
      last-modified:
      - Thu, 19 Dec 2013 06:01:28 GMT
      etag:
      - '"ef83be3695579f2a473fbd1adf67b426"'
      x-oauth-scopes:
      - repo, user:email
      x-accepted-oauth-scopes:
      - repo, repo:status, repo:deployment, public_repo, delete_repo, user, user:email,
        user:follow, admin:org, write:org, read:org, gist, site_admin, user:assets,
        user:assets:read
      vary:
      - Accept, Authorization, Cookie, X-GitHub-OTP
      - Accept-Encoding
      x-github-media-type:
      - github.beta; format=json
      x-content-type-options:
      - nosniff
      access-control-allow-credentials:
      - 'true'
      access-control-expose-headers:
      - ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes,
        X-Accepted-OAuth-Scopes, X-Poll-Interval
      access-control-allow-origin:
      - '*'
      x-github-request-id:
      - 657713DF:1FE8:AA6A92:52B29E76
      content-encoding:
      - gzip
    body:
      encoding: UTF-8
      string: '{"url":"https://api.github.com/repos/everydayhero/supporter/compare/5f9d5684d5dda99c3983caaa08982e961c3a424a...2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","html_url":"https://github.com/everydayhero/supporter/compare/5f9d5684d5dda99c3983caaa08982e961c3a424a...2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","permalink_url":"https://github.com/everydayhero/supporter/compare/everydayhero:5f9d568...everydayhero:2a7b649","diff_url":"https://github.com/everydayhero/supporter/compare/5f9d5684d5dda99c3983caaa08982e961c3a424a...2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d.diff","patch_url":"https://github.com/everydayhero/supporter/compare/5f9d5684d5dda99c3983caaa08982e961c3a424a...2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d.patch","base_commit":{"sha":"5f9d5684d5dda99c3983caaa08982e961c3a424a","commit":{"author":{"name":"Joel
        Richards","email":"joelr@everydayhero.com.au","date":"2013-12-16T04:17:39Z"},"committer":{"name":"soloman","email":"soloman1124@gmail.com","date":"2013-12-19T05:54:17Z"},"message":"-
        add new API end point to query volunteering activities","tree":{"sha":"2dc926c2e65044da81155e7484ba47db10ac7a9b","url":"https://api.github.com/repos/everydayhero/supporter/git/trees/2dc926c2e65044da81155e7484ba47db10ac7a9b"},"url":"https://api.github.com/repos/everydayhero/supporter/git/commits/5f9d5684d5dda99c3983caaa08982e961c3a424a","comment_count":0},"url":"https://api.github.com/repos/everydayhero/supporter/commits/5f9d5684d5dda99c3983caaa08982e961c3a424a","html_url":"https://github.com/everydayhero/supporter/commit/5f9d5684d5dda99c3983caaa08982e961c3a424a","comments_url":"https://api.github.com/repos/everydayhero/supporter/commits/5f9d5684d5dda99c3983caaa08982e961c3a424a/comments","author":{"login":"joelr","id":17657,"avatar_url":"https://gravatar.com/avatar/f85cfe720dfeabae455e02aa3f4de103?d=https%3A%2F%2Fidenticons.github.com%2Fc654fadc9a9b502997ce42c9dc82ece2.png&r=x","gravatar_id":"f85cfe720dfeabae455e02aa3f4de103","url":"https://api.github.com/users/joelr","html_url":"https://github.com/joelr","followers_url":"https://api.github.com/users/joelr/followers","following_url":"https://api.github.com/users/joelr/following{/other_user}","gists_url":"https://api.github.com/users/joelr/gists{/gist_id}","starred_url":"https://api.github.com/users/joelr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joelr/subscriptions","organizations_url":"https://api.github.com/users/joelr/orgs","repos_url":"https://api.github.com/users/joelr/repos","events_url":"https://api.github.com/users/joelr/events{/privacy}","received_events_url":"https://api.github.com/users/joelr/received_events","type":"User","site_admin":false},"committer":{"login":"soloman1124","id":2509619,"avatar_url":"https://gravatar.com/avatar/e83720fe6e8d84c83fd9e5594341934b?d=https%3A%2F%2Fidenticons.github.com%2F2bece726fb1978b736e296cdd8b42018.png&r=x","gravatar_id":"e83720fe6e8d84c83fd9e5594341934b","url":"https://api.github.com/users/soloman1124","html_url":"https://github.com/soloman1124","followers_url":"https://api.github.com/users/soloman1124/followers","following_url":"https://api.github.com/users/soloman1124/following{/other_user}","gists_url":"https://api.github.com/users/soloman1124/gists{/gist_id}","starred_url":"https://api.github.com/users/soloman1124/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soloman1124/subscriptions","organizations_url":"https://api.github.com/users/soloman1124/orgs","repos_url":"https://api.github.com/users/soloman1124/repos","events_url":"https://api.github.com/users/soloman1124/events{/privacy}","received_events_url":"https://api.github.com/users/soloman1124/received_events","type":"User","site_admin":false},"parents":[{"sha":"6a86ab48ee39f6f7953a3091ebf04c3d2df45d14","url":"https://api.github.com/repos/everydayhero/supporter/commits/6a86ab48ee39f6f7953a3091ebf04c3d2df45d14","html_url":"https://github.com/everydayhero/supporter/commit/6a86ab48ee39f6f7953a3091ebf04c3d2df45d14"}]},"merge_base_commit":{"sha":"6a86ab48ee39f6f7953a3091ebf04c3d2df45d14","commit":{"author":{"name":"Marty
        Zalega","email":"marty@zalega.me","date":"2013-12-19T05:23:39Z"},"committer":{"name":"Marty
        Zalega","email":"marty@zalega.me","date":"2013-12-19T05:23:39Z"},"message":"Merge
        pull request #861 from everydayhero/dh-fix-page-title\n\nAdd page name to
        html title","tree":{"sha":"5b44842311be9eeee6ddb2788486b0e8e6ddb07c","url":"https://api.github.com/repos/everydayhero/supporter/git/trees/5b44842311be9eeee6ddb2788486b0e8e6ddb07c"},"url":"https://api.github.com/repos/everydayhero/supporter/git/commits/6a86ab48ee39f6f7953a3091ebf04c3d2df45d14","comment_count":0},"url":"https://api.github.com/repos/everydayhero/supporter/commits/6a86ab48ee39f6f7953a3091ebf04c3d2df45d14","html_url":"https://github.com/everydayhero/supporter/commit/6a86ab48ee39f6f7953a3091ebf04c3d2df45d14","comments_url":"https://api.github.com/repos/everydayhero/supporter/commits/6a86ab48ee39f6f7953a3091ebf04c3d2df45d14/comments","author":{"login":"evilmarty","id":44270,"avatar_url":"https://gravatar.com/avatar/311d53c97e7a8b346915180fc7dc31c2?d=https%3A%2F%2Fidenticons.github.com%2F66d58ab619387ebb945e0e3abe5e0a1c.png&r=x","gravatar_id":"311d53c97e7a8b346915180fc7dc31c2","url":"https://api.github.com/users/evilmarty","html_url":"https://github.com/evilmarty","followers_url":"https://api.github.com/users/evilmarty/followers","following_url":"https://api.github.com/users/evilmarty/following{/other_user}","gists_url":"https://api.github.com/users/evilmarty/gists{/gist_id}","starred_url":"https://api.github.com/users/evilmarty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/evilmarty/subscriptions","organizations_url":"https://api.github.com/users/evilmarty/orgs","repos_url":"https://api.github.com/users/evilmarty/repos","events_url":"https://api.github.com/users/evilmarty/events{/privacy}","received_events_url":"https://api.github.com/users/evilmarty/received_events","type":"User","site_admin":false},"committer":{"login":"evilmarty","id":44270,"avatar_url":"https://gravatar.com/avatar/311d53c97e7a8b346915180fc7dc31c2?d=https%3A%2F%2Fidenticons.github.com%2F66d58ab619387ebb945e0e3abe5e0a1c.png&r=x","gravatar_id":"311d53c97e7a8b346915180fc7dc31c2","url":"https://api.github.com/users/evilmarty","html_url":"https://github.com/evilmarty","followers_url":"https://api.github.com/users/evilmarty/followers","following_url":"https://api.github.com/users/evilmarty/following{/other_user}","gists_url":"https://api.github.com/users/evilmarty/gists{/gist_id}","starred_url":"https://api.github.com/users/evilmarty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/evilmarty/subscriptions","organizations_url":"https://api.github.com/users/evilmarty/orgs","repos_url":"https://api.github.com/users/evilmarty/repos","events_url":"https://api.github.com/users/evilmarty/events{/privacy}","received_events_url":"https://api.github.com/users/evilmarty/received_events","type":"User","site_admin":false},"parents":[{"sha":"06da591074b5461255c09b164c6d94177ce10703","url":"https://api.github.com/repos/everydayhero/supporter/commits/06da591074b5461255c09b164c6d94177ce10703","html_url":"https://github.com/everydayhero/supporter/commit/06da591074b5461255c09b164c6d94177ce10703"},{"sha":"6ca598e66958f4329e207eb70df394dae30ce8ec","url":"https://api.github.com/repos/everydayhero/supporter/commits/6ca598e66958f4329e207eb70df394dae30ce8ec","html_url":"https://github.com/everydayhero/supporter/commit/6ca598e66958f4329e207eb70df394dae30ce8ec"}]},"status":"diverged","ahead_by":3,"behind_by":1,"total_commits":3,"commits":[{"sha":"927aec01ea99b739aafce3bdde7976ecdc8a7611","commit":{"author":{"name":"colinbankier","email":"colinbankier@gmail.com","date":"2013-12-13T05:51:40Z"},"committer":{"name":"colinbankier","email":"colinbankier@gmail.com","date":"2013-12-18T23:54:07Z"},"message":"Add
        rake task for importing volunteermatch activities.","tree":{"sha":"980303eb5e5477ba41fe506a15f376dd43341d02","url":"https://api.github.com/repos/everydayhero/supporter/git/trees/980303eb5e5477ba41fe506a15f376dd43341d02"},"url":"https://api.github.com/repos/everydayhero/supporter/git/commits/927aec01ea99b739aafce3bdde7976ecdc8a7611","comment_count":0},"url":"https://api.github.com/repos/everydayhero/supporter/commits/927aec01ea99b739aafce3bdde7976ecdc8a7611","html_url":"https://github.com/everydayhero/supporter/commit/927aec01ea99b739aafce3bdde7976ecdc8a7611","comments_url":"https://api.github.com/repos/everydayhero/supporter/commits/927aec01ea99b739aafce3bdde7976ecdc8a7611/comments","author":{"login":"colinbankier","id":806356,"avatar_url":"https://gravatar.com/avatar/1854702379e0e1bb9561d6ccc26acd8a?d=https%3A%2F%2Fidenticons.github.com%2Ffbdc717dcf81ecc65dfce3e181b8e1d6.png&r=x","gravatar_id":"1854702379e0e1bb9561d6ccc26acd8a","url":"https://api.github.com/users/colinbankier","html_url":"https://github.com/colinbankier","followers_url":"https://api.github.com/users/colinbankier/followers","following_url":"https://api.github.com/users/colinbankier/following{/other_user}","gists_url":"https://api.github.com/users/colinbankier/gists{/gist_id}","starred_url":"https://api.github.com/users/colinbankier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colinbankier/subscriptions","organizations_url":"https://api.github.com/users/colinbankier/orgs","repos_url":"https://api.github.com/users/colinbankier/repos","events_url":"https://api.github.com/users/colinbankier/events{/privacy}","received_events_url":"https://api.github.com/users/colinbankier/received_events","type":"User","site_admin":false},"committer":{"login":"colinbankier","id":806356,"avatar_url":"https://gravatar.com/avatar/1854702379e0e1bb9561d6ccc26acd8a?d=https%3A%2F%2Fidenticons.github.com%2Ffbdc717dcf81ecc65dfce3e181b8e1d6.png&r=x","gravatar_id":"1854702379e0e1bb9561d6ccc26acd8a","url":"https://api.github.com/users/colinbankier","html_url":"https://github.com/colinbankier","followers_url":"https://api.github.com/users/colinbankier/followers","following_url":"https://api.github.com/users/colinbankier/following{/other_user}","gists_url":"https://api.github.com/users/colinbankier/gists{/gist_id}","starred_url":"https://api.github.com/users/colinbankier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colinbankier/subscriptions","organizations_url":"https://api.github.com/users/colinbankier/orgs","repos_url":"https://api.github.com/users/colinbankier/repos","events_url":"https://api.github.com/users/colinbankier/events{/privacy}","received_events_url":"https://api.github.com/users/colinbankier/received_events","type":"User","site_admin":false},"parents":[{"sha":"e65456b4c603298815cb53e543560e152b301de6","url":"https://api.github.com/repos/everydayhero/supporter/commits/e65456b4c603298815cb53e543560e152b301de6","html_url":"https://github.com/everydayhero/supporter/commit/e65456b4c603298815cb53e543560e152b301de6"}]},{"sha":"6ebffbd928170c13a69bab1f732c6651b1d8b5a8","commit":{"author":{"name":"colinbankier","email":"colinbankier@gmail.com","date":"2013-12-16T03:33:11Z"},"committer":{"name":"colinbankier","email":"colinbankier@gmail.com","date":"2013-12-18T23:54:07Z"},"message":"with
        Soloman: handle empty results in paginated results fetcher.","tree":{"sha":"7763475957797b6e951d33e075630d70faa38197","url":"https://api.github.com/repos/everydayhero/supporter/git/trees/7763475957797b6e951d33e075630d70faa38197"},"url":"https://api.github.com/repos/everydayhero/supporter/git/commits/6ebffbd928170c13a69bab1f732c6651b1d8b5a8","comment_count":0},"url":"https://api.github.com/repos/everydayhero/supporter/commits/6ebffbd928170c13a69bab1f732c6651b1d8b5a8","html_url":"https://github.com/everydayhero/supporter/commit/6ebffbd928170c13a69bab1f732c6651b1d8b5a8","comments_url":"https://api.github.com/repos/everydayhero/supporter/commits/6ebffbd928170c13a69bab1f732c6651b1d8b5a8/comments","author":{"login":"colinbankier","id":806356,"avatar_url":"https://gravatar.com/avatar/1854702379e0e1bb9561d6ccc26acd8a?d=https%3A%2F%2Fidenticons.github.com%2Ffbdc717dcf81ecc65dfce3e181b8e1d6.png&r=x","gravatar_id":"1854702379e0e1bb9561d6ccc26acd8a","url":"https://api.github.com/users/colinbankier","html_url":"https://github.com/colinbankier","followers_url":"https://api.github.com/users/colinbankier/followers","following_url":"https://api.github.com/users/colinbankier/following{/other_user}","gists_url":"https://api.github.com/users/colinbankier/gists{/gist_id}","starred_url":"https://api.github.com/users/colinbankier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colinbankier/subscriptions","organizations_url":"https://api.github.com/users/colinbankier/orgs","repos_url":"https://api.github.com/users/colinbankier/repos","events_url":"https://api.github.com/users/colinbankier/events{/privacy}","received_events_url":"https://api.github.com/users/colinbankier/received_events","type":"User","site_admin":false},"committer":{"login":"colinbankier","id":806356,"avatar_url":"https://gravatar.com/avatar/1854702379e0e1bb9561d6ccc26acd8a?d=https%3A%2F%2Fidenticons.github.com%2Ffbdc717dcf81ecc65dfce3e181b8e1d6.png&r=x","gravatar_id":"1854702379e0e1bb9561d6ccc26acd8a","url":"https://api.github.com/users/colinbankier","html_url":"https://github.com/colinbankier","followers_url":"https://api.github.com/users/colinbankier/followers","following_url":"https://api.github.com/users/colinbankier/following{/other_user}","gists_url":"https://api.github.com/users/colinbankier/gists{/gist_id}","starred_url":"https://api.github.com/users/colinbankier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colinbankier/subscriptions","organizations_url":"https://api.github.com/users/colinbankier/orgs","repos_url":"https://api.github.com/users/colinbankier/repos","events_url":"https://api.github.com/users/colinbankier/events{/privacy}","received_events_url":"https://api.github.com/users/colinbankier/received_events","type":"User","site_admin":false},"parents":[{"sha":"927aec01ea99b739aafce3bdde7976ecdc8a7611","url":"https://api.github.com/repos/everydayhero/supporter/commits/927aec01ea99b739aafce3bdde7976ecdc8a7611","html_url":"https://github.com/everydayhero/supporter/commit/927aec01ea99b739aafce3bdde7976ecdc8a7611"}]},{"sha":"2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","commit":{"author":{"name":"Joel
        Richards","email":"jo@easyjo.com","date":"2013-12-19T06:01:28Z"},"committer":{"name":"Joel
        Richards","email":"jo@easyjo.com","date":"2013-12-19T06:01:28Z"},"message":"Merge
        pull request #868 from everydayhero/cb_import_activites_rake_task\n\nPR -
        [TA-1916] - Add rake task for importing volunteermatch activities.","tree":{"sha":"dac39f656ec4b3f3d2fd475426e309c5b0df0aa3","url":"https://api.github.com/repos/everydayhero/supporter/git/trees/dac39f656ec4b3f3d2fd475426e309c5b0df0aa3"},"url":"https://api.github.com/repos/everydayhero/supporter/git/commits/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","comment_count":0},"url":"https://api.github.com/repos/everydayhero/supporter/commits/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","html_url":"https://github.com/everydayhero/supporter/commit/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","comments_url":"https://api.github.com/repos/everydayhero/supporter/commits/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/comments","author":{"login":"joelr","id":17657,"avatar_url":"https://gravatar.com/avatar/f85cfe720dfeabae455e02aa3f4de103?d=https%3A%2F%2Fidenticons.github.com%2Fc654fadc9a9b502997ce42c9dc82ece2.png&r=x","gravatar_id":"f85cfe720dfeabae455e02aa3f4de103","url":"https://api.github.com/users/joelr","html_url":"https://github.com/joelr","followers_url":"https://api.github.com/users/joelr/followers","following_url":"https://api.github.com/users/joelr/following{/other_user}","gists_url":"https://api.github.com/users/joelr/gists{/gist_id}","starred_url":"https://api.github.com/users/joelr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joelr/subscriptions","organizations_url":"https://api.github.com/users/joelr/orgs","repos_url":"https://api.github.com/users/joelr/repos","events_url":"https://api.github.com/users/joelr/events{/privacy}","received_events_url":"https://api.github.com/users/joelr/received_events","type":"User","site_admin":false},"committer":{"login":"joelr","id":17657,"avatar_url":"https://gravatar.com/avatar/f85cfe720dfeabae455e02aa3f4de103?d=https%3A%2F%2Fidenticons.github.com%2Fc654fadc9a9b502997ce42c9dc82ece2.png&r=x","gravatar_id":"f85cfe720dfeabae455e02aa3f4de103","url":"https://api.github.com/users/joelr","html_url":"https://github.com/joelr","followers_url":"https://api.github.com/users/joelr/followers","following_url":"https://api.github.com/users/joelr/following{/other_user}","gists_url":"https://api.github.com/users/joelr/gists{/gist_id}","starred_url":"https://api.github.com/users/joelr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joelr/subscriptions","organizations_url":"https://api.github.com/users/joelr/orgs","repos_url":"https://api.github.com/users/joelr/repos","events_url":"https://api.github.com/users/joelr/events{/privacy}","received_events_url":"https://api.github.com/users/joelr/received_events","type":"User","site_admin":false},"parents":[{"sha":"6a86ab48ee39f6f7953a3091ebf04c3d2df45d14","url":"https://api.github.com/repos/everydayhero/supporter/commits/6a86ab48ee39f6f7953a3091ebf04c3d2df45d14","html_url":"https://github.com/everydayhero/supporter/commit/6a86ab48ee39f6f7953a3091ebf04c3d2df45d14"},{"sha":"6ebffbd928170c13a69bab1f732c6651b1d8b5a8","url":"https://api.github.com/repos/everydayhero/supporter/commits/6ebffbd928170c13a69bab1f732c6651b1d8b5a8","html_url":"https://github.com/everydayhero/supporter/commit/6ebffbd928170c13a69bab1f732c6651b1d8b5a8"}]}],"files":[{"sha":"a4c47bc134b8ac3eb6213e5f150c365654b8173c","filename":"app/jobs/volunteer_match/activity_import.rb","status":"modified","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/everydayhero/supporter/blob/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/app/jobs/volunteer_match/activity_import.rb","raw_url":"https://github.com/everydayhero/supporter/raw/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/app/jobs/volunteer_match/activity_import.rb","contents_url":"https://api.github.com/repos/everydayhero/supporter/contents/app/jobs/volunteer_match/activity_import.rb?ref=2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","patch":"@@
        -8,6 +8,12 @@ def perform\n       VolunteerMatch::Activity.update_volunteering_activity_for
        user\n     end\n \n+    def self.import_for_active_connections\n+      VolunteerMatchConnection.by_state(:connected).each
        do |connection|\n+        VolunteerMatch::ActivityImport.new(connection.user).perform\n+      end\n+    end\n+\n     private\n
        \n     attr_reader :user"},{"sha":"bc6ccaee6d5988962803d1c00c55e244efa9d09e","filename":"app/models/volunteer_match/paginated_results.rb","status":"modified","additions":16,"deletions":1,"changes":17,"blob_url":"https://github.com/everydayhero/supporter/blob/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/app/models/volunteer_match/paginated_results.rb","raw_url":"https://github.com/everydayhero/supporter/raw/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/app/models/volunteer_match/paginated_results.rb","contents_url":"https://api.github.com/repos/everydayhero/supporter/contents/app/models/volunteer_match/paginated_results.rb?ref=2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","patch":"@@
        -18,7 +18,12 @@ def fetch_all &mapper\n     private\n \n     def fetch_page_result
        page\n-      PageResult.new @fetch_call.call(page), @mapper\n+      result_page
        = @fetch_call.call page\n+      if result_page\n+        PageResult.new result_page,
        @mapper\n+      else\n+        NullPageResult.new\n+      end\n     end\n
        \n     class PageResult\n@@ -36,4 +41,14 @@ def results_size\n       end\n     end\n   end\n+\n+  class
        NullPageResult\n+    def results\n+      []\n+    end\n+\n+    def results_size\n+      0\n+    end\n+  end\n
        end"},{"sha":"bda0ecb90fecdb5661ed163f560e426a6d6679cf","filename":"app/models/volunteer_match_connection.rb","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/everydayhero/supporter/blob/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/app/models/volunteer_match_connection.rb","raw_url":"https://github.com/everydayhero/supporter/raw/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/app/models/volunteer_match_connection.rb","contents_url":"https://api.github.com/repos/everydayhero/supporter/contents/app/models/volunteer_match_connection.rb?ref=2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","patch":"@@
        -1,6 +1,8 @@\n class VolunteerMatchConnection < ActiveRecord::Base\n   belongs_to
        :user\n \n+  scope :by_state, ->(state) { where state: state.to_s }\n+\n   after_initialize
        do |connection|\n     connection.check_email_verified\n   end"},{"sha":"58d8201d940fdd8882d1b1a31a26c42372fa535c","filename":"lib/tasks/volunteermatch.rake","status":"modified","additions":15,"deletions":8,"changes":23,"blob_url":"https://github.com/everydayhero/supporter/blob/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/lib/tasks/volunteermatch.rake","raw_url":"https://github.com/everydayhero/supporter/raw/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/lib/tasks/volunteermatch.rake","contents_url":"https://api.github.com/repos/everydayhero/supporter/contents/lib/tasks/volunteermatch.rake?ref=2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","patch":"@@
        -1,10 +1,17 @@\n namespace :volunteermatch do\n-\tnamespace :opportunity do\n-\t  desc
        \"Import volunteermatch opportunities to elasticsearch\"\n-\t  task :import,
        [:batch_size] => :environment do |t, args|\n-\t    args.with_defaults batch_size:
        20\n-\t    opportunities = VolunteerMatch::Opportunity.find_by location: \"us\"\n-\t    Reindex::BulkJob.batch
        opportunities, args[:batch_size]\n-\t  end\n-\tend\n+  namespace :opportunity
        do\n+    desc \"Import volunteermatch opportunities to elasticsearch\"\n+    task
        :import, [:batch_size] => :environment do |t, args|\n+      args.with_defaults
        batch_size: 20\n+      opportunities = VolunteerMatch::Opportunity.find_by
        location: \"us\"\n+      Reindex::BulkJob.batch opportunities, args[:batch_size]\n+    end\n+  end\n+\n+  namespace
        :activity do\n+    desc \"Import Volunteermatch Activies for connected users\"\n+    task
        :import => :environment do |t, args|\n+      VolunteerMatch::ActivityImporter.import_for_active_connections\n+    end\n+  end\n
        end"},{"sha":"383f40d4ecd9cd5d2dae8516b78433ea666eaaf7","filename":"test/jobs/volunteer_match/activity_import_test.rb","status":"added","additions":44,"deletions":0,"changes":44,"blob_url":"https://github.com/everydayhero/supporter/blob/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/test/jobs/volunteer_match/activity_import_test.rb","raw_url":"https://github.com/everydayhero/supporter/raw/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/test/jobs/volunteer_match/activity_import_test.rb","contents_url":"https://api.github.com/repos/everydayhero/supporter/contents/test/jobs/volunteer_match/activity_import_test.rb?ref=2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","patch":"@@
        -0,0 +1,44 @@\n+require ''test_helper''\n+\n+class ActivityImportTest < ActiveSupport::TestCase\n+  test
        \"import_for_active_connections performs import for a connected\n+        volunteer
        match connection\" do\n+    user = FactoryGirl.create :user, verified: true\n+    VolunteerMatchConnection.new(state:
        :connected, user: user).save!\n+\n+    importer = MiniTest::Mock.new\n+    importer.expect
        :perform, [], []\n+    VolunteerMatch::ActivityImport.stub :new, importer
        do\n+      VolunteerMatch::ActivityImport.import_for_active_connections\n+    end\n+\n+    assert
        importer.verify\n+  end\n+\n+  test \"import_for_active_connections creates
        an activity importer\n+        for a verified user\" do\n+    user = FactoryGirl.create
        :user, verified: true\n+    VolunteerMatchConnection.new(state: :connected,
        user: user).save!\n+\n+    assert_importer_user = ->(target_user) {\n+      assert_equal
        target_user, user\n+      OpenStruct.new\n+    }\n+    VolunteerMatch::ActivityImport.stub
        :new, assert_importer_user do\n+      VolunteerMatch::ActivityImport.import_for_active_connections\n+    end\n+  end\n+\n+  test
        \"import_for_active_connections does not create an activity importer\n+        for
        an unverified user\" do\n+    user = FactoryGirl.create :user, verified: false\n+    VolunteerMatchConnection.new(user:
        user).save!\n+\n+    importer = MiniTest::Mock.new\n+    VolunteerMatch::ActivityImport.stub
        :new, importer do\n+      VolunteerMatch::ActivityImport.import_for_active_connections\n+    end\n+\n+    assert
        importer.verify\n+  end\n+end"},{"sha":"cb553dfa961d59662871148a5ed793b0b1043dd8","filename":"test/models/volunteer_match/paginated_result_fetcher_test.rb","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/everydayhero/supporter/blob/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/test/models/volunteer_match/paginated_result_fetcher_test.rb","raw_url":"https://github.com/everydayhero/supporter/raw/2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d/test/models/volunteer_match/paginated_result_fetcher_test.rb","contents_url":"https://api.github.com/repos/everydayhero/supporter/contents/test/models/volunteer_match/paginated_result_fetcher_test.rb?ref=2a7b6493b699bfe8eeb5dfcc00fc4a0e1f972b3d","patch":"@@
        -34,6 +34,15 @@ def page_at page\n     assert_equal [], results\n   end\n
        \n+  test \"#fetch_all handles nil results\" do\n+    fetcher = VolunteerMatch::PaginatedResults.new
        { nil }\n+    results = fetcher.fetch_all do |result_page|\n+      result_page.results.map
        &:to_s\n+    end\n+\n+    assert_equal [], results\n+  end\n+\n   private\n
        \n   def fetch_all_resullts_for total_results, page_size"}]}'
    http_version: '1.1'
  recorded_at: Thu, 19 Dec 2013 07:21:28 GMT
recorded_with: VCR 2.8.0
